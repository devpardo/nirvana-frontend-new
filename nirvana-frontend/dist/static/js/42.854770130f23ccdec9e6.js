webpackJsonp([42],{324:function(e,t,o){o(818);var i=o(5)(o(507),o(731),"data-v-67bfec7f",null);i.options.__file="/Users/bryanpardo/Development/nirvana-frontend/src/views/Setting/ProfileInfoEdit.vue",i.esModule&&Object.keys(i.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] ProfileInfoEdit.vue: functional components are not supported with templates, they should use render functions."),e.exports=i.exports},507:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{showFlag:"",realNameFlag:!1,birthdayFlag:!1,birthPlaceHolder:"出生日(仅能修改一次)",profile:{realname:"",birthday:"",gender:"男"}}},beforeDestroy:function(){localStorage.getItem("profileInfo")&&localStorage.removeItem("profileInfo")},watch:{"$store.state.sundry.profileInfoEditDone":function(e){e&&this.updateProfileInfo()},"profile.birthday":function(e){e&&(this.birthPlaceHolder="")}},mounted:function(){var e={navigateTitle:!1};this.$store.dispatch("setNavigationTitle",e),localStorage.getItem("profileInfo")&&(this.showFlag=localStorage.getItem("profileInfo")),this.fetchProfile()},methods:{fetchProfile:function(){var e=this;this.api.getProfile().then(function(t){e.profile.realname=t.data.realname,t.data.realname&&(e.realNameFlag=!0),e.profile.birthday=t.data.birthday,t.data.birthday&&(e.birthdayFlag=!0),e.profile.gender=t.data.gender?"女":"男"}).catch(function(e){console.log(e)})},updateProfileInfo:function(){var e=this,t="";if("1"===this.showFlag){if(this.realNameFlag)return this.$toast({message:"不能再修改",position:"middle",duration:5e3}),void this.$store.dispatch("setProfileInfoEditDone",!1);if(!this.profile.realname)return void this.$toast({message:"不能为空",position:"middle",duration:5e3});t={realname:this.profile.realname}}if("3"===this.showFlag){if(this.birthdayFlag)return this.$toast({message:"不能再修改",position:"middle",duration:5e3}),void this.$store.dispatch("setProfileInfoEditDone",!1);if(!this.profile.birthday)return void this.$toast({message:"不能为空",position:"middle",duration:5e3});t={birthday:this.profile.birthday}}if("2"===this.showFlag){var o="";"男"===this.profile.gender?o=0:"女"===this.profile.gender&&(o=1),t={gender:o}}this.api.updateProfile(t).then(function(){e.$toast({message:"修改成功",position:"middle",duration:5e3}),e.fetchProfile(),e.$store.dispatch("setProfileInfoEditDone",!1)}).catch(function(t){e.$store.dispatch("setProfileInfoEditDone",!1),e.$toast({message:"信息保存失败",position:"middle",duration:5e3}),console.log(t)})}}}},568:function(e,t,o){t=e.exports=o(1)(),t.push([e.i,".opacity[data-v-67bfec7f] {\n  opacity: 0.6;\n}",""])},731:function(e,t,o){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"body"},["1"===e.showFlag?o("mt-field",{class:{opacity:e.realNameFlag},attrs:{placeholder:"真实姓名(仅能修改一次)",readonly:e.realNameFlag},model:{value:e.profile.realname,callback:function(t){e.profile.realname=t},expression:"profile.realname"}}):"2"===e.showFlag?o("div",[o("mt-radio",{attrs:{options:["男","女"]},model:{value:e.profile.gender,callback:function(t){e.profile.gender=t},expression:"profile.gender"}})],1):"3"===e.showFlag?o("mt-field",{class:{opacity:e.birthdayFlag},attrs:{type:"date",placeholder:e.birthPlaceHolder,readonly:e.birthdayFlag},model:{value:e.profile.birthday,callback:function(t){e.profile.birthday=t},expression:"profile.birthday"}}):e._e()],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},818:function(e,t,o){var i=o(568);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o(2)("517c9744",i,!1)}});