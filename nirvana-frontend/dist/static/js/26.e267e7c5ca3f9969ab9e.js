webpackJsonp([26],{315:function(n,e,a){a(781);var t=a(5)(a(497),a(695),"data-v-1fef6dfc",null);t.options.__file="/Users/bryanpardo/Development/nirvana-frontend/src/views/Setting/Deposit.vue",t.esModule&&Object.keys(t.esModule).some(function(n){return"default"!==n&&"__esModule"!==n})&&console.error("named exports are not supported in *.vue files."),t.options.functional&&console.error("[vue-loader] Deposit.vue: functional components are not supported with templates, they should use render functions."),n.exports=t.exports},343:function(n,e,a){a(347);var t=a(5)(a(344),a(346),"data-v-a8ef9cc2",null);t.options.__file="/Users/bryanpardo/Development/nirvana-frontend/src/components/Shared/DataLoading.vue",t.esModule&&Object.keys(t.esModule).some(function(n){return"default"!==n&&"__esModule"!==n})&&console.error("named exports are not supported in *.vue files."),t.options.functional&&console.error("[vue-loader] DataLoading.vue: functional components are not supported with templates, they should use render functions."),n.exports=t.exports},344:function(n,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["dataLoad"]}},345:function(n,e,a){e=n.exports=a(1)(),e.push([n.i,".loading[data-v-a8ef9cc2] {\n  text-align: center;\n}\n\n.load-position[data-v-a8ef9cc2] {\n  margin: 0 auto;\n  display: inline-block;\n  left: -0.133333rem;\n  top: 0.133333rem;\n  position: relative;\n}\n\n.load-txt[data-v-a8ef9cc2] {\n  position: relative;\n  top: -0.133333rem;\n}",""])},346:function(n,e,a){n.exports={render:function(){var n=this,e=n.$createElement,a=n._self._c||e;return a("div",[n.dataLoad.flag?a("p",{staticClass:"loading"},[a("mt-spinner",{staticClass:"load-position",attrs:{type:"fading-circle"}}),a("span",{staticClass:"load-txt"},[n._v(n._s(n.dataLoad.data))])],1):n._e()])},staticRenderFns:[]},n.exports.render._withStripped=!0},347:function(n,e,a){var t=a(345);"string"==typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);a(2)("35e8fe72",t,!1)},497:function(n,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=a(343),i=a.n(t);e.default={data:function(){return{arrow_down:this.$fontawesome("arrow-down"),button:!1,payment_amount:"",payWayList:"",payMethods:[],payBanks:[],payValue:[],childIndex:0,payway:0,QRCode:"",QRCodeFlag:!1,httpWay:"",profile:"",input_amount_max:"",input_amount_min:"",currentItem:"",dataLoad:{flag:!0,data:"数据加载中"},bank:{realname:"",user_bank_no:"",user_bank_name:""}}},computed:{promoAmount:function(){var n=this.currentItem&&this.payment_amount&&this.currentItem.promo_rate&&(this.payment_amount*this.currentItem.promo_rate).toFixed(2);return n&&n>0?n:0}},mounted:function(){var n={navigateTitle:!1};this.$store.dispatch("setNavigationTitle",n),this.$store.state.user.email&&(this.getPayWay(),this.fetchProfile())},components:{DataLoading:i.a},methods:{fetchProfile:function(){var n=this;this.api.getProfile().then(function(e){n.profile=e.data}).catch(function(n){console.log(n)})},setQRCode:function(n,e){n&&n.length&&n.forEach(function(n,a){n.flag=a===e})},getIndex:function(n,e){for(var a=-1,t=0;t<n.length;t++)if(n[t].name===e){a=t;break}return a},getOfflines:function(n){if("payment_offline"===n.payment_type){var e=[];n.payment_methods.forEach(function(n,a){var t="";t=0===a,n.flag=t,e.push(n)}),this.QRCode=e}},getLimitAmount:function(n,e){if(e){if(e.srcElement.value){var a=e.srcElement.value,t=this.payWayList[n].payment_methods,i=this.getIndex(t,a);-1!==i&&(this.setQRCode(this.QRCode,i),this.childIndex=i,this.currentItem=t[i],this.input_amount_max=this.currentItem.input_amount_max,this.input_amount_min=this.currentItem.input_amount_min)}}else{"payment_offline"===this.payWayList[n].payment_type?this.QRCodeFlag=!0:this.QRCodeFlag=!1;var o=this.payWayList[n].payment_methods[0];if(this.currentItem=o,this.payValue[n]){var r=this.getIndex(this.payWayList[n].payment_methods,this.payValue[n]);-1!==r&&(this.childIndex=r,this.setQRCode(this.QRCode,r))}this.input_amount_max=o.input_amount_max,this.input_amount_min=o.input_amount_min}},getPayWay:function(){var n=this;this.api.getProfile().then(function(e){n.payWayList=e.data.payment_method_categories;var a=n;n.payWayList.forEach(function(n,e){var t=[];0===e&&("payment_offline"===n.payment_type&&(a.QRCodeFlag=!0),a.getOfflines(n)),n.payment_methods.forEach(function(i,o){var r={};if(0===o&&(a.payValue[e]=i.name,0===e&&(a.currentItem=i,a.input_amount_max=i.input_amount_max,a.input_amount_min=i.input_amount_min)),"payment_online"===n.payment_type&&i.banks&&i.banks.length){var s=[];i.banks.forEach(function(n){s.push(n.name)}),r={arr:s,index:e,childIndex:o,value:i.banks[0].name},a.payBanks.push(r)}t.push(i.name)}),a.payMethods.push(t)}),n.dataLoad.flag=!1}).catch(function(e){n.dataLoad.flag=!1,console.log(e)})},getBanksId:function(n,e){var a=e.length,t=!1,i=0;for(i;i<a;i++)if(e[i].name===n){t=!0;break}return t?e[i].id:-1},handleDeposit:function(){var n=this;if(!this.payment_amount)return this.$toast({message:"请输入充值金额",position:"middle",duration:5e3}),!1;if(""===this.payWayList||!this.payWayList.length)return this.$toast({message:"您目前的账户层级不能拥有任何充值方式",position:"middle",duration:5e3}),!1;if(parseFloat(this.payment_amount)>parseFloat(this.input_amount_max)||parseFloat(this.payment_amount)<parseFloat(this.input_amount_min))return this.$toast({message:"输入金额不符合充值限额",position:"middle",duration:5e3}),!1;var e=!1;if("payment_offline_bank"===this.currentItem.payment_type&&(e=!0),e){if(!this.bank.realname||!this.bank.user_bank_name)return this.$toast({message:"请完善【您的银行帐号】必填信息",position:"middle",duration:5e3}),!1;if(this.bank.user_bank_no&&4!==this.bank.user_bank_no.length)return this.$toast({message:"若要输入银行卡号，请输入【银行卡号后四位】",position:"middle",duration:5e3}),!1}this.$messagebox.confirm("确定充值?").then(function(a){var t=n.$toast({message:"去往充值路途中...",position:"middle"});n.button=!0;var i={payment_amount:"",payment_method_id:""};i.payment_amount=n.payment_amount;var o=n.payWayList[n.payway].payment_methods,r=-1,s=-1,m=n;if(!o||!o.length)return void n.$toast({message:"提交数据出错，请刷新重试",position:"middle",duration:5e3});for(var d=0;d<o.length;d++)if(o[d].name===m.payValue[m.payway]){r=d;break}o[0].banks&&o[0].banks.length&&n.payBanks.forEach(function(e){if(e.index===n.payway&&r===e.childIndex)return void(s=n.getBanksId(e.value,o[e.childIndex].banks))}),-1!==s?i.payment_method_id=s:-1!==r&&(i.payment_method_id=o[r].id),e&&(i.realname=n.bank.realname,i.user_bank_no=n.bank.user_bank_no,i.user_bank_name=n.bank.user_bank_name),n.api.deposit(i).then(function(a){if(n.button=!1,n.payment_amount="",e)n.$toast({message:"您的银行账号信息提交成功！相关客服会做后续处理",position:"middle",duration:5e3});else if("payment_offline_wxpay"===n.currentItem.payment_type||"payment_offline_alipay"===n.currentItem.payment_type)if(a.data.id){var t="";"payment_offline_alipay"===n.currentItem.payment_type?(t="alipay",n.$router.push({name:"OfflineAlipay",params:{billNo:a.data.id,type:t}})):(t="wxpay",n.$router.push({name:"OfflineWepay",params:{billNo:a.data.id,type:t}}))}else n.$toast({message:"获取微信支付账单失败，请重试或联系客服",position:"middle",duration:5e3});else window.location.href="http://52.78.74.208/payments/gateway/"+a.data.payment_method+"/"+a.data.bill_no}).catch(function(e){n.button=!1,t.close(),console.log(e)})})}}}},531:function(n,e,a){e=n.exports=a(1)(),e.push([n.i,"p[data-v-1fef6dfc] {\n  padding: 0;\n  margin: 0;\n}\n\n.money[data-v-1fef6dfc] {\n  background-color: #122151;\n  padding: .5rem .3rem;\n  margin: .3rem;\n}\n\n.money p[data-v-1fef6dfc] {\n  color: #ffffff;\n  font-weight: bold;\n}\n\n.money .info[data-v-1fef6dfc] {\n  color: rgba(255, 255, 255, 0.5);\n}\n\n.money .banksRadio[data-v-1fef6dfc] {\n  width: 96%;\n  margin: 0.133333rem auto;\n  border: 0.032rem solid #d8d8d8;\n  box-shadow: 0 0 0.032rem 0 #C6CCCC;\n}\n\n.money .bank-title[data-v-1fef6dfc] {\n  font-weight: bold;\n  text-align: center;\n}\n\n.money .transfer-bank .fa[data-v-1fef6dfc] {\n  text-align: center;\n  padding: 0.266667rem 0;\n  font-size: 0.48rem;\n  color: #999999;\n}\n\n.money .transfer-bank .input-bank[data-v-1fef6dfc] {\n  background-color: #ffffff;\n  width: 96%;\n  box-shadow: 0 0.026667rem 0.08rem 0 #999999;\n  margin: 0.266667rem auto;\n  padding: 0.266667rem;\n  padding-top: 0.533333rem;\n}\n\n.money .transfer-bank .input-bank p[data-v-1fef6dfc] {\n  padding-bottom: 0.4rem;\n  color: #666666;\n  font-size: 0.373333rem;\n}\n\n.money .transfer-bank .input-bank p i[data-v-1fef6dfc] {\n  font-style: normal;\n  display: inline-block;\n  width: 25%;\n  text-align: right;\n  margin-right: 0.133333rem;\n}\n\n.money .transfer-bank .input-bank p span[data-v-1fef6dfc] {\n  display: inline-block;\n  width: 73%;\n  vertical-align: top;\n  word-wrap: break-word;\n  text-align: justify;\n  color: #666666;\n  font-weight: bold;\n  border-bottom: 0.032rem solid #efefef;\n  padding-bottom: 0.133333rem;\n  padding-left: 0.133333rem;\n}\n\n.money .transfer-bank .input-bank p span input[data-v-1fef6dfc] {\n  width: 100%;\n  border: none;\n  outline: none;\n  font-size: 0.373333rem;\n}\n\n.banks[data-v-1fef6dfc] {\n  background-color: #ffffff;\n  width: 96%;\n  box-shadow: 0 0.026667rem 0.08rem 0 #999999;\n  margin: 0.266667rem auto;\n  padding: 0 0.266667rem;\n}\n\n.banks p[data-v-1fef6dfc] {\n  padding: 0.4rem 0;\n  border-bottom: 0.032rem solid #f0f0f0;\n  color: #666666;\n  font-size: 0.373333rem;\n}\n\n.banks p span[data-v-1fef6dfc] {\n  display: inline-block;\n  width: 73%;\n  vertical-align: top;\n  word-wrap: break-word;\n  text-align: right;\n}\n\n.number[data-v-1fef6dfc] {\n  position: relative;\n  margin: .1rem 0;\n}\n\n.number span[data-v-1fef6dfc] {\n  font-size: 0.48rem;\n  color: #ffffff;\n}\n\n.number .promo-number[data-v-1fef6dfc] {\n  position: absolute;\n  right: 0.666667rem;\n  bottom: 0.133333rem;\n  color: #fcd667;\n}\n\n.input[data-v-1fef6dfc] {\n  display: inline-block;\n  width: 90%;\n  outline: none;\n  border: 0.032rem solid rgba(62, 174, 237, 0.2);\n  font-size: 0.64rem;\n  background-color: #0b0e31;\n  height: 1.2rem;\n  padding: 0 .3rem;\n  line-height: .8rem;\n  color: #fcd667;\n  font-weight: bold;\n}\n\n.input[data-v-1fef6dfc]::-webkit-input-placeholder {\n  color: rgba(255, 255, 255, 0.5);\n  font-size: 0.373333rem;\n}\n\n.input[data-v-1fef6dfc]:-ms-input-placeholder {\n  color: rgba(255, 255, 255, 0.5);\n  font-size: 0.373333rem;\n}\n\n.input[data-v-1fef6dfc]::placeholder {\n  color: rgba(255, 255, 255, 0.5);\n  font-size: 0.373333rem;\n}\n\n.QR-code[data-v-1fef6dfc] {\n  width: 5.333333rem;\n  height: 5.333333rem;\n  margin: 0.266667rem auto;\n}\n\n.mint-button--large[data-v-1fef6dfc] {\n  margin: .3rem auto;\n  background-color: #fcd667;\n  font-size: 0.373333rem;\n  color: #122151;\n  height: 1.2rem;\n  line-height: 1.2rem;\n  border-radius: 2rem;\n  font-weight: bold;\n}\n\n.confirm[data-v-1fef6dfc] {\n  text-align: center;\n  color: #cb202d;\n}\n\n.money .mint-tabbar[data-v-1fef6dfc] {\n  background-color: #122151 !important;\n}\n\n.money .mint-tabbar > .mint-tab-item[data-v-1fef6dfc] {\n  background-color: #122151 !important;\n  border: 0.053333rem solid #122151;\n  width: 25%;\n}\n\n.money .mint-tabbar > .mint-tab-item.is-selected[data-v-1fef6dfc] {\n  border: 0.053333rem solid #fcd667;\n}\n\n.money .mint-tab-item[data-v-1fef6dfc] {\n  -ms-flex: inherit;\n      flex: inherit;\n}\n\n.money .img[data-v-1fef6dfc] {\n  position: relative;\n  top: -0.213333rem;\n}\n\n.money .img[data-v-1fef6dfc],\n.money .clolor[data-v-1fef6dfc] {\n  display: block;\n}\n\n.money .color[data-v-1fef6dfc] {\n  color: #fff !important;\n  padding: 0 0.266667rem;\n  display: inline-block;\n}\n\n.money .mint-tabbar[data-v-1fef6dfc] {\n  position: inherit;\n  padding-top: 0.266667rem;\n  background-color: #ffffff;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n}\n\n.money .mint-tab-item[data-v-1fef6dfc] {\n  border: 0.032rem solid #ffffff;\n  padding: 0.266667rem 0;\n  padding-top: 0.4rem;\n  margin: 0.266667rem 0;\n}",""])},695:function(n,e,a){n.exports={render:function(){var n=this,e=n.$createElement,a=n._self._c||e;return a("div",{staticClass:"body"},[n.payWayList.length?a("div",["payment_offline"!==n.payWayList[n.payway].payment_type||"payment_offline_bank"===n.currentItem.payment_type||"payment_offline_wxpay"===n.currentItem.payment_type||"payment_offline_alipay"===n.currentItem.payment_type?a("div",{staticClass:"money"},[a("p",[n._v("充值金额")]),n._v(" "),a("div",{staticClass:"number"},[a("span",[n._v("￥")]),n._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:n.payment_amount,expression:"payment_amount"}],staticClass:"input",attrs:{type:"number",placeholder:"请输入充值金额"},domProps:{value:n.payment_amount},on:{input:function(e){e.target.composing||(n.payment_amount=e.target.value)},blur:function(e){n.$forceUpdate()}}}),n._v(" "),n.promoAmount?a("span",{staticClass:"promo-number"},[n._v("可获得"+n._s(n.promoAmount)+"元返利红包。")]):n._e()]),n._v(" "),a("p",{staticClass:"info"},[a("span",[n._v("主账户余额：")]),a("span",[n._v("￥"+n._s(n.profile.main_wallet||"0.0"))])]),n._v(" "),a("p",{staticClass:"info"},[a("span",[n._v("每笔充值限额为：")]),a("span",[n._v("￥"+n._s(n.input_amount_min||"0.0")+"~￥"+n._s(n.input_amount_max||"0.0"))])])]):n._e(),n._v(" "),a("div",{staticClass:"money"},[a("p",[n._v("请选择充值方式")]),n._v(" "),a("mt-tabbar",{model:{value:n.payway,callback:function(e){n.payway=e},expression:"payway"}},n._l(n.payWayList,function(e,t){return a("mt-tab-item",{key:t,attrs:{id:t},nativeOn:{click:function(a){n.getOfflines(e)}}},[a("div",{on:{click:function(e){n.getLimitAmount(t)}}},[a("span",{staticClass:"img"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.image_url,expression:"item.image_url"}],attrs:{width:"30",height:"31"},slot:"icon"})]),n._v(" "),a("span",{staticClass:"color"},[n._v(n._s(e.name))])])])})),n._v(" "),a("mt-tab-container",{model:{value:n.payway,callback:function(e){n.payway=e},expression:"payway"}},n._l(n.payMethods,function(e,t){return a("mt-tab-container-item",{key:t,attrs:{id:t}},[a("mt-radio",{attrs:{align:"right",options:e},nativeOn:{click:function(e){n.getLimitAmount(t,e)}},model:{value:n.payValue[t],callback:function(e){var a=n.payValue,i=t;Array.isArray(a)?a.splice(i,1,e):n.payValue[t]=e},expression:"payValue[i]"}}),n._v(" "),n.payBanks.length?a("div",n._l(n.payBanks,function(e){return e.index===t&&e.childIndex===n.childIndex?a("div",[a("mt-radio",{staticClass:"banksRadio",attrs:{align:"right",options:e.arr},model:{value:e.value,callback:function(n){e.value=n},expression:"bank.value"}})],1):n._e()})):n._e(),n._v(" "),n.QRCode&&n.QRCode.length&&n.QRCodeFlag?a("div",["payment_offline_bank"===n.currentItem.payment_type?a("div",{staticClass:"transfer-bank"},[a("p",{staticClass:"bank-title"},[n._v("您的银行帐号")]),n._v(" "),a("div",{staticClass:"input-bank"},[a("p",[a("i",[n._v("银行名称: ")]),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:n.bank.user_bank_name,expression:"bank.user_bank_name"}],attrs:{placeholder:"必填"},domProps:{value:n.bank.user_bank_name},on:{input:function(e){e.target.composing||(n.bank.user_bank_name=e.target.value)}}})])]),n._v(" "),a("p",[a("i",[n._v("银行卡号: ")]),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:n.bank.user_bank_no,expression:"bank.user_bank_no"}],attrs:{placeholder:"输入银行卡后四位(选填)"},domProps:{value:n.bank.user_bank_no},on:{input:function(e){e.target.composing||(n.bank.user_bank_no=e.target.value)}}})])]),n._v(" "),a("p",[a("i",[n._v("持卡人姓名: ")]),a("span",[a("input",{directives:[{name:"model",rawName:"v-model",value:n.bank.realname,expression:"bank.realname"}],attrs:{placeholder:"必填"},domProps:{value:n.bank.realname},on:{input:function(e){e.target.composing||(n.bank.realname=e.target.value)}}})])])]),n._v(" "),a("p",{staticClass:"fa"},[n._v(n._s(n.arrow_down))])]):n._e(),n._v(" "),n._l(n.QRCode,function(e){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.flag&&e.bank_no,expression:"item.flag && item.bank_no"}]},[a("p",{staticClass:"bank-title"},[n._v("官方银行帐号")]),n._v(" "),a("div",{staticClass:"banks"},[a("p",[n._v("持卡人姓名: "),a("span",[n._v(n._s(e.bank_realname))])]),n._v(" "),a("p",[n._v("银行名称:  "),a("span",[n._v(n._s(e.bank_name))])]),n._v(" "),a("p",[n._v("银行卡号: "),a("span",[n._v(n._s(e.bank_no))])])])])}),n._v(" "),n._l(n.QRCode,function(n){return a("div",{directives:[{name:"show",rawName:"v-show",value:n.flag&&!n.bank_no&&"payment_offline_wxpay"!==n.payment_type&&"payment_offline_alipay"!==n.payment_type,expression:"item.flag && !item.bank_no && item.payment_type !== 'payment_offline_wxpay' && item.payment_type !== 'payment_offline_alipay'"}],staticClass:"QR-code"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:n.image_url,expression:"item.image_url"}],attrs:{width:"100%",height:"100%"}})])})],2):n._e()],1)})),n._v(" "),n.QRCodeFlag&&"payment_offline_bank"!==n.currentItem.payment_type&&"payment_offline_wxpay"!==n.currentItem.payment_type&&"payment_offline_alipay"!==n.currentItem.payment_type?n._e():a("mt-button",{attrs:{disabled:n.button,size:"large"},on:{click:function(e){n.handleDeposit()}}},[n._v("确认并提交")]),n._v(" "),n.QRCodeFlag?a("p",{staticClass:"confirm"},[n._v("完成支付后，请联系在线客服进行额度添加。")]):a("p",{staticClass:"confirm"},[n._v("充值金额将在5分钟内到账，请耐心等候。")])],1)]):n.dataLoad.flag?n._e():a("div",[a("p",{staticClass:"no-data"},[n._v("您暂未有任何充值方式")])]),n._v(" "),a("data-loading",{attrs:{dataLoad:n.dataLoad}})],1)},staticRenderFns:[]},n.exports.render._withStripped=!0},781:function(n,e,a){var t=a(531);"string"==typeof t&&(t=[[n.i,t,""]]),t.locals&&(n.exports=t.locals);a(2)("c61bd4d4",t,!1)}});