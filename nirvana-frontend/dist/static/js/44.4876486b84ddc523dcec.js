webpackJsonp([44],{319:function(t,e,n){n(859);var i=n(5)(n(502),n(771),"data-v-fe3cb38c",null);i.options.__file="/Users/bryanpardo/Development/nirvana-frontend/src/views/Setting/PhotoEdit.vue",i.esModule&&Object.keys(i.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] PhotoEdit.vue: functional components are not supported with templates, they should use render functions."),t.exports=i.exports},502:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{image:"",file:""}},mounted:function(){var t={navigateTitle:!1};this.$store.dispatch("setNavigationTitle",t),this.fetchProfile()},methods:{fetchProfile:function(){var t=this;this.api.getProfile().then(function(e){t.image=e.data.aws_url}).catch(function(t){console.log(t)})},fileSelected:function(t){var e=t.target.files||t.dataTransfer.files;if(e.length)return 1!==e.length?void this.$toast({message:"请上传一张头像",position:"middle",duration:5e3}):(this.file=e[0],void this.uploadAvatar())},uploadAvatar:function(){var t=this;if(!this.file)return void this.$toast({message:"上传文件为空",position:"middle",duration:5e3});var e=this.$toast({message:"图片上传中...",position:"center"}),n={headers:{"Content-Type":"multipart/form-data"}},i=new FormData;i.append("file",this.file),this.api.postUploadAvatar(i,n).then(function(){t.fetchProfile(),e.close(),t.$toast({message:"上传图片成功",position:"middle",duration:5e3})}).catch(function(t){e.close(),console.log(t)})}}}},609:function(t,e,n){e=t.exports=n(1)(),e.push([t.i,".img[data-v-fe3cb38c] {\n  width: 100%;\n  height: 10rem;\n}\n\n.button[data-v-fe3cb38c] {\n  margin: 0.533333rem auto;\n}\n\n.file[data-v-fe3cb38c] {\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  position: absolute;\n  width: 100%;\n  opacity: 0;\n  z-index: 2;\n}\n\n.mint-button--large[data-v-fe3cb38c] {\n  position: relative;\n  width: 82%;\n  margin: 0.533333rem auto;\n  font-size: 0.426667rem;\n  background-color: #ffffff;\n}",""])},771:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"body"},[n("div",{staticClass:"img"},[t.image?n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.image,expression:"image"}],attrs:{width:"100%",height:"100%"}}):t._e()]),t._v(" "),n("div",{staticClass:"button"},[n("mt-button",{attrs:{size:"large"}},[t._v("\n      从本地上传"),n("input",{staticClass:"file",attrs:{type:"file",accept:"image/*"},on:{change:function(e){t.fileSelected(e)}}})]),t._v(" "),n("mt-button",{attrs:{size:"large"}},[t._v("\n      拍一张照片"),n("input",{staticClass:"file",attrs:{type:"file",accept:"image/*",capture:"camera"},on:{change:function(e){t.fileSelected(e)}}})])],1)])},staticRenderFns:[]},t.exports.render._withStripped=!0},859:function(t,e,n){var i=n(609);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(2)("0700a97c",i,!1)}});